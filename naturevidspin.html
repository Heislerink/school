<!DOCTYPE html>
<html>
<head>
  <title>YouTube Video Spinner</title>
  <script>
    let apiKey = 'AIzaSyCaytWovYoM9wV6ITylrt53TPigOBT3zKw'; // Your YouTube Data API v3 key here
    let playlistId = 'PLwBoQZPcMB03nmHKpmXBoBD0NqaoHB29H';
    let videos = [];
    let interval;
    let counter = 0;

    // Fetch YouTube playlist data
    function fetchVideos() {
      let url = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=${playlistId}&key=${apiKey}`;
      fetch(url)
      .then(response => response.json())
      .then(data => {
        videos = data.items.map(item => ({
          title: item.snippet.title,
          thumbnail: item.snippet.thumbnails.default.url,
          videoId: item.snippet.resourceId.videoId
        }));
      })
      .catch(error => console.error('Error fetching data:', error));
    }

    // Start spinning
    function spin() {
      let spinnerElement = document.getElementById('spinner');

      interval = setInterval(function() {
        let video = videos[counter % videos.length];
        spinnerElement.innerHTML = `<img src="${video.thumbnail}" alt="${video.title}">`;
        counter++;
      }, 100);

      // Slow down and stop
      setTimeout(function() {
        clearInterval(interval);
        let finalChoice = videos[Math.floor(Math.random() * videos.length)];
        spinnerElement.innerHTML = `<img src="${finalChoice.thumbnail}" alt="${finalChoice.title}">
        <br><a href="https://www.youtube.com/watch?v=${finalChoice.videoId}" target="_blank">Play</a>`;
      }, 2000);
    }
  </script>
</head>
<body onload="fetchVideos()">
  <div id="spinner" style="font-size: 48px;">
    <!-- Spinner thumbnail will go here -->
  </div>

  <button onclick="spin()">Spin!</button>
</body>
</html>
